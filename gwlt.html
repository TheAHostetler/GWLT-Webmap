<!DOCTYPE html>
<html>
<head>
  <meta charset='utf-utf-8' name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no'/>
  <title>GWLT Webmap</title>

<!-- Add Leaflet library and styles -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.6.0/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.6.0/dist/leaflet.js"></script>

<!-- Add ajax jquery library -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

<!-- Add Tetasset Trails data from file
  <scipt src="data/TetassetTrails_geojson.js" type="text/javascript"></script>
-->

<!-- Add CSS styling info for the map -->
  <style type="text/css">
  </style>

<!-- Alternatively, add styling info for page layout by reading in a CSS file -->
  <link rel="stylesheet" href="styles.css"></link>

</head>

<body>
  <div id="header">
    <img src="https://theahostetler.github.io/GWLT-Webmap/images/logo_hike_worcester.jpg" alt=:"Hike Worcester Logo"></img>
    <p class="title">Hike Worcester<p>
  </div>

  <div id="sidebar">
    <p class="sidebar-heading"> Click on a trail to learn more </p>
    <div class="info-border">
      <div class="tabs">
        <ul>
          <li><a href="index-leaflet.html">Hiking Map</a></li>
          <li><a class = "active" href="GWLT.html"> GWLT </a></li>
          <li><a href="getinvolved.html">Get Involved</a></li>
        </ul>
      </div>
      <div>
        <p class="info-bin">

        </p>
      </div>
    </div>
  </div>

  <div id="map"></div>

<script>

// initialize the map
  var map = L.map('map').setView([42.264, -71.799], 13);

// load a tile layer
  L.tileLayer('https://tile.thunderforest.com/cycle/{z}/{x}/{y}.png?apikey=043e839ea61f489cb15e6981706e65f2', {
    	attribution: '&copy; <a href="http://www.thunderforest.com/">Thunderforest</a>, &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',
      maxZoom: 17,
      minZoom: 9
    }).addTo(map);

// Add function to bind popups to each line features - idealy this would be run for each of these imports
function onEachFeature(feature, layer) {
        layer.bindPopup(feature.properties.name);
    };


// Add trails to map from geojson
//Could not add data from folder, had to use URL. Not sure why.
  var trails = $.getJSON("https://theahostetler.github.io/GWLT-Webmap/Data/Tetasset_Ridge_Trails_11_10_20.geojson",function(data){
    L.geoJson(data,{
      onEachFeature: onEachFeature
    }).addTo(map);
  });

//Add challenge routes to map from geoJSON
  var challenge = $.getJSON("https://theahostetler.github.io/GWLT-Webmap/Data/Tetasset_Ridge_Challenge_Routes.geojson",function(data){
    L.geoJson(data,{
      onEachFeature: onEachFeature
    }).addTo(map);
  });

//Add trailheads to map from geoJSON
var trailhead_points = $.getJSON("https://theahostetler.github.io/GWLT-Webmap/Data/Tetasset_Ridge_Trailheads.geojson",function(data){
  L.geoJson(data,{
    pointToLayer: function(feature,latlng){
	  var marker = L.marker(latlng);
    marker.bindPopup('<b>Trailhead</b> <br/> Access to '+feature.properties.Trail+'<br/><br/><b>Address:</b><br/>'+feature.properties.REV_Address+'<br/>'+feature.properties.REV_City);
    return marker;

    }
  }).addTo(map);
});

</script>

</body>

</html>
